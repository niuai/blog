(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{368:function(e,t,o){e.exports=o.p+"assets/img/netcore-publish-setting.b51fd724.png"},369:function(e,t,o){e.exports=o.p+"assets/img/netcore-hosting-bundle.051400f1.png"},404:function(e,t,o){"use strict";o.r(t);var r=o(45),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"iis-部署-net-core"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#iis-部署-net-core"}},[e._v("#")]),e._v(" IIS 部署 .Net Core")]),e._v(" "),r("h2",{attrs:{id:"发布-net-core-项目到本地文件夹"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#发布-net-core-项目到本地文件夹"}},[e._v("#")]),e._v(" 发布 .Net Core 项目到本地文件夹")]),e._v(" "),r("p",[e._v("注意 .Net Core 的部署模式有 "),r("code",[e._v("框架依赖")]),e._v("（部署平台需要有 .Net Core 运行时） 和 "),r("code",[e._v("独立")]),e._v("（任何 Pure 平台）两种模式。")]),e._v(" "),r("p",[r("img",{attrs:{src:o(368),alt:"netcore-publish-setting"}})]),e._v(" "),r("h2",{attrs:{id:"本地安装-iis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#本地安装-iis"}},[e._v("#")]),e._v(" 本地安装 IIS")]),e._v(" "),r("blockquote",[r("p",[e._v("参考链接："),r("a",{attrs:{href:"https://www.cnblogs.com/lxhbky/p/10677687.html",target:"_blank",rel:"noopener noreferrer"}},[e._v('.net core入门-发布及部署_异常(处理程序“aspNetCore”在其模块列表中有一个错误模块“AspNetCoreModuleV2")处理'),r("OutboundLink")],1),e._v("，"),r("a",{attrs:{href:"https://www.cnblogs.com/grom/articles/9337707.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("在IIS上部署你的ASP.NET Core项目"),r("OutboundLink")],1)])]),e._v(" "),r("ol",[r("li",[r("p",[e._v("要部署 .Net Core 的项目，IIS 需要安装 "),r("code",[e._v("AspNetCoreModuleV2")]),e._v(" 模块（不知道是不是受到选择 "),r("code",[e._v("框架依赖")]),e._v(" 的影响，可以试下选择 "),r("code",[e._v("独立")]),e._v(" 后且没有 "),r("code",[e._v("AspNetCoreModuleV2")]),e._v(" 的情况下网站能不能正常运行），IIS 的应用程序池的 .Net CLR 版本需要选择为 "),r("code",[e._v("托管")]),e._v("。")])]),e._v(" "),r("li",[r("p",[e._v("模块官方下载地址："),r("a",{attrs:{href:"https://dotnet.microsoft.com/download/dotnet-core/3.1",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://dotnet.microsoft.com/download/dotnet-core/3.1"),r("OutboundLink")],1),e._v("，选好对应的 .Net Core 版本后，选择IIS支持中的IIS runtime support（Hosting Bundle），如下图：")]),e._v(" "),r("p",[r("img",{attrs:{src:o(369),alt:"netcore-hosting-bundle"}})])]),e._v(" "),r("li",[r("p",[e._v("网站启动后，就可以正常访问了")])])]),e._v(" "),r("h2",{attrs:{id:"采用-azure-devops-pipeline-来发布-net-core-项目到本地的-iis"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#采用-azure-devops-pipeline-来发布-net-core-项目到本地的-iis"}},[e._v("#")]),e._v(" 采用 Azure DevOps Pipeline 来发布 .Net Core 项目到本地的 IIS")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("将本地电脑配置为 Pipeline 的 Agent（用来 Build、Deploy 等操作）")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("Build Agent，在 Azure DevOps 的 "),r("code",[e._v("Project Settings")]),e._v(" 中选择 "),r("code",[e._v("Agent Pools")]),e._v("，新建一个 pool，之后在 Agents 中添加一个 agent，会弹出一个页面指导如何将本地电脑注册为一个 agent，具体操作见 "),r("a",{attrs:{href:"https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/v2-windows?view=azure-devops",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),r("OutboundLink")],1),e._v("，需要注意的是，在选择身份验证（pat, negotiate, alt, integrated）的时候，如果 Azure DevOps Server 部署在一个非 HTTPS 的环境时，pat（Personal access token）似乎不管用，要选择 "),r("code",[e._v("negotiate")]),e._v("（用户名和密码）的方式。")])]),e._v(" "),r("li",[r("p",[e._v("Deployment Groups，用于 Deploy 应用，在 "),r("code",[e._v("Pipelines")]),e._v(" -> "),r("code",[e._v("Deployment groups")]),e._v(" 中可看到配置，添加的操作基本和 Build Agent 一样，不同的是在配置的时候要加上 deploymentgroup 参数："),r("code",[e._v('.\\config.cmd --deploymentgroup --deploymentgroupname "DESKTOP-NIUAI"')])])])])]),e._v(" "),r("li",[r("p",[e._v("新建一个针对 .Net Core 的 CI")])]),e._v(" "),r("li",[r("p",[e._v("新建一个发布到 IIS 的 CD（IIS Web App Manager、IIS Web App Deploy），Deployment group 选择之前步骤创建的。在 "),r("code",[e._v("IIS Web App Manager")]),e._v(" 任务中，可以配置将要部署网站的端口、应用程序池、文件物理路径等")])]),e._v(" "),r("li",[r("p",[e._v("一切配置完成后，就可以触发 build、deployment 来发布你的应用程序了")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);