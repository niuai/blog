<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EFCore 的简单使用 | 牛艾的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/blog/assets/favicon.ico">
    <meta name="description" content="牛艾的博客">
    
    <link rel="preload" href="/blog/assets/css/0.styles.4f6326e7.css" as="style"><link rel="preload" href="/blog/assets/js/app.e8e2b0fe.js" as="script"><link rel="preload" href="/blog/assets/js/2.150d4df4.js" as="script"><link rel="preload" href="/blog/assets/js/12.442a32b2.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.883404c5.js"><link rel="prefetch" href="/blog/assets/js/11.2bf40fb4.js"><link rel="prefetch" href="/blog/assets/js/13.d4505988.js"><link rel="prefetch" href="/blog/assets/js/14.69d04352.js"><link rel="prefetch" href="/blog/assets/js/15.aa322413.js"><link rel="prefetch" href="/blog/assets/js/16.462f1851.js"><link rel="prefetch" href="/blog/assets/js/17.9ee868e7.js"><link rel="prefetch" href="/blog/assets/js/18.c0d7f3d7.js"><link rel="prefetch" href="/blog/assets/js/19.58ebc14b.js"><link rel="prefetch" href="/blog/assets/js/20.1661fe85.js"><link rel="prefetch" href="/blog/assets/js/21.4546561e.js"><link rel="prefetch" href="/blog/assets/js/22.3e441d11.js"><link rel="prefetch" href="/blog/assets/js/23.9841e0dc.js"><link rel="prefetch" href="/blog/assets/js/24.05946c9d.js"><link rel="prefetch" href="/blog/assets/js/25.673a1955.js"><link rel="prefetch" href="/blog/assets/js/26.7f74321d.js"><link rel="prefetch" href="/blog/assets/js/27.869d4f2f.js"><link rel="prefetch" href="/blog/assets/js/28.e79eb24c.js"><link rel="prefetch" href="/blog/assets/js/29.7705e2e7.js"><link rel="prefetch" href="/blog/assets/js/3.ca66f2ac.js"><link rel="prefetch" href="/blog/assets/js/30.63f35af2.js"><link rel="prefetch" href="/blog/assets/js/31.ad32149f.js"><link rel="prefetch" href="/blog/assets/js/32.e8f7ea98.js"><link rel="prefetch" href="/blog/assets/js/33.1cea82d7.js"><link rel="prefetch" href="/blog/assets/js/34.73f671df.js"><link rel="prefetch" href="/blog/assets/js/35.0e1d5115.js"><link rel="prefetch" href="/blog/assets/js/36.b8a4257f.js"><link rel="prefetch" href="/blog/assets/js/37.ca807013.js"><link rel="prefetch" href="/blog/assets/js/38.5d7bf783.js"><link rel="prefetch" href="/blog/assets/js/39.4e7b0203.js"><link rel="prefetch" href="/blog/assets/js/4.929f5782.js"><link rel="prefetch" href="/blog/assets/js/40.a1b0426e.js"><link rel="prefetch" href="/blog/assets/js/41.2a49e6c4.js"><link rel="prefetch" href="/blog/assets/js/42.97287909.js"><link rel="prefetch" href="/blog/assets/js/43.0d7d32a2.js"><link rel="prefetch" href="/blog/assets/js/5.791860f8.js"><link rel="prefetch" href="/blog/assets/js/6.72845be3.js"><link rel="prefetch" href="/blog/assets/js/7.728f6c27.js"><link rel="prefetch" href="/blog/assets/js/8.750f778b.js"><link rel="prefetch" href="/blog/assets/js/9.f564967c.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4f6326e7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/user-logo.jpg" alt="牛艾的博客" class="logo"> <span class="site-name can-hide">牛艾的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/niuai-docs/" class="nav-link router-link-active">
  Docs
</a></div> <a href="https://github.com/niuai/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/blog/niuai-docs/" class="nav-link router-link-active">
  Docs
</a></div> <a href="https://github.com/niuai/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/blog/niuai-docs/" aria-current="page" class="sidebar-link">学习笔记</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Abp</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Apm</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Azure</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>BigData</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DotNetCore</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GraphQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Hangfire</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Machine-Learning</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ORM</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/niuai-docs/ORM/ef-core-mysql.html" class="sidebar-link">EFCore 连 MySQL</a></li><li><a href="/blog/niuai-docs/ORM/ef-core.html" aria-current="page" class="active sidebar-link">EFCore 的简单使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/niuai-docs/ORM/ef-core.html#安装-nuget-包-mssql-db-first" class="sidebar-link">安装 nuget 包（MSSQL DB first）</a></li><li class="sidebar-sub-header"><a href="/blog/niuai-docs/ORM/ef-core.html#创建实体、dbcontext" class="sidebar-link">创建实体、DBContext</a></li><li class="sidebar-sub-header"><a href="/blog/niuai-docs/ORM/ef-core.html#连接字符串" class="sidebar-link">连接字符串</a></li><li class="sidebar-sub-header"><a href="/blog/niuai-docs/ORM/ef-core.html#在-startup-cs-类中的-configureservices-方法里注入该-dbcontext" class="sidebar-link">在 Startup.cs 类中的 ConfigureServices 方法里注入该 DBContext</a></li><li class="sidebar-sub-header"><a href="/blog/niuai-docs/ORM/ef-core.html#添加数据库迁移文件" class="sidebar-link">添加数据库迁移文件</a></li><li class="sidebar-sub-header"><a href="/blog/niuai-docs/ORM/ef-core.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/blog/niuai-docs/ORM/ef-core.html#其他" class="sidebar-link">其他</a></li></ul></li><li><a href="/blog/niuai-docs/ORM/mysql-profile.html" class="sidebar-link">MySQL 调用跟踪（Neor Profile SQL）</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Others</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="efcore-的简单使用"><a href="#efcore-的简单使用" class="header-anchor">#</a> EFCore 的简单使用</h1> <h2 id="安装-nuget-包-mssql-db-first"><a href="#安装-nuget-包-mssql-db-first" class="header-anchor">#</a> 安装 nuget 包（MSSQL DB first）</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>Install-Package Microsoft.EntityFrameworkCore
Install-Package Microsoft.EntityFrameworkCore.SqlServer
Install-Package Microsoft.EntityFrameworkCore.Tools
</code></pre></div><h2 id="创建实体、dbcontext"><a href="#创建实体、dbcontext" class="header-anchor">#</a> 创建实体、DBContext</h2> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SampleContext</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">DbContext</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">SampleContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">SampleContext</span><span class="token punctuation">(</span><span class="token class-name">DbContextOptions<span class="token punctuation">&lt;</span>SampleContext<span class="token punctuation">&gt;</span></span> options<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnConfiguring</span><span class="token punctuation">(</span><span class="token class-name">DbContextOptionsBuilder</span> optionsBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnConfiguring</span><span class="token punctuation">(</span>optionsBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> Users <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">ModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        modelBuilder<span class="token punctuation">.</span><span class="token function">HasDefaultSchema</span><span class="token punctuation">(</span><span class="token string">&quot;NetCoreSample&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不用默认的 [dbo] Schema，而是自定义该值</span>

        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnModelCreating</span><span class="token punctuation">(</span>modelBuilder<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="连接字符串"><a href="#连接字符串" class="header-anchor">#</a> 连接字符串</h2> <p>Windows验证，位于 <code>appsettings.json</code> 配置文件的根节点的 <code>ConnectionStrings</code> 节点下</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;ConnectionStrings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;Default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Server=localhost\\SQLEXPRESS;Database=NetCoreSample;Trusted_Connection=True;&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="在-startup-cs-类中的-configureservices-方法里注入该-dbcontext"><a href="#在-startup-cs-类中的-configureservices-方法里注入该-dbcontext" class="header-anchor">#</a> 在 Startup.cs 类中的 <code>ConfigureServices</code> 方法里注入该 DBContext</h2> <div class="language-csharp extra-class"><pre class="language-csharp"><code>services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContext</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SampleContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span> options<span class="token punctuation">.</span><span class="token function">UseSqlServer</span><span class="token punctuation">(</span>Configuration<span class="token punctuation">.</span><span class="token function">GetConnectionString</span><span class="token punctuation">(</span><span class="token string">&quot;Default&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="添加数据库迁移文件"><a href="#添加数据库迁移文件" class="header-anchor">#</a> 添加数据库迁移文件</h2> <p>打开程序包管理控制台，选择正确的默认项目，敲入 <code>add-migration [description]</code>，此时会自动生成迁移代码，再敲入 <code>update-database</code>，就可以将代码中的数据库结构反映到数据库（MSSQL、MySQL）中</p> <ul><li><p>自动生成的代码</p> <p><img src="data:image/png;base64,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" alt="migrations"></p></li> <li><p>数据库</p> <p><img src="data:image/png;base64,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" alt="ef-database"></p></li></ul> <h2 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h2> <p>在代码中注入 <code>SampleContext</code>，就可以对该数据库增删改查了</p> <h2 id="其他"><a href="#其他" class="header-anchor">#</a> 其他</h2> <ol><li><p>将 Migration 生成SQL脚本而不是直接实施于数据库（在生产环境时，常常并不能直接操作数据库，而是通过CI、CD执行SQL脚本）</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Script-Migration -From <span class="token number">0</span>
</code></pre></div><p>0表示包括所有的迁移，如果是比如 Init，就从 Init 之后的（不包括），也可以用 -To 来获取到哪个</p></li> <li><p>值转换（Value Conversions），属性与数据库字段不是完全匹配的时候，而是具有函数关系时</p> <blockquote><p>参考：<a href="https://docs.microsoft.com/en-us/ef/core/modeling/value-conversions" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/en-us/ef/core/modeling/value-conversions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">ModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    modelBuilder
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Rider<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">Property</span><span class="token punctuation">(</span>e <span class="token operator">=&gt;</span> e<span class="token punctuation">.</span>Mount<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">HasConversion</span><span class="token punctuation">(</span>
            v <span class="token operator">=&gt;</span> v<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 属性到数据库的映射</span>
            v <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>EquineBeast<span class="token punctuation">)</span>Enum<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">EquineBeast</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 数据库到属性的映射</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>表拆分，如果一个实体的属性太多，想将部分属性聚合成一个新实体属性，但仍想要存在一张表里，就可以用 <a href="https://docs.microsoft.com/en-us/ef/core/modeling/table-splitting" target="_blank" rel="noopener noreferrer">Table Splitting<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来实现</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">OrderStatus<span class="token punctuation">?</span></span> Status <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DetailedOrder</span> DetailedOrder <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DetailedOrder</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">OrderStatus<span class="token punctuation">?</span></span> Status <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> BillingAddress <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ShippingAddress <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> Version <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code>modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DetailedOrder<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>dob <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    dob<span class="token punctuation">.</span><span class="token function">ToTable</span><span class="token punctuation">(</span><span class="token string">&quot;Orders&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dob<span class="token punctuation">.</span><span class="token function">Property</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>Status<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">HasColumnName</span><span class="token punctuation">(</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

modelBuilder<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Order<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>ob <span class="token operator">=&gt;</span>
<span class="token punctuation">{</span>
    ob<span class="token punctuation">.</span><span class="token function">ToTable</span><span class="token punctuation">(</span><span class="token string">&quot;Orders&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ob<span class="token punctuation">.</span><span class="token function">Property</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>Status<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">HasColumnName</span><span class="token punctuation">(</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ob<span class="token punctuation">.</span><span class="token function">HasOne</span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>DetailedOrder<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">WithOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">HasForeignKey</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DetailedOrder<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>o <span class="token operator">=&gt;</span> o<span class="token punctuation">.</span>Id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>计算列，如果想将实体的一组字段组合起来存到数据库（并将被组合的字段标为 <code>NotMapped</code>），可以通过以下方式实现（<code>set</code> 属性是必需的，尽管什么都不做，否则数据库无法生成该属性对应的字段）</p> <blockquote><p>注意：自增的整形ID无法映射到该字段之中，估计是因为ID的自增发生在数据库，所以计算列中的ID始终为0</p></blockquote> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">ConsoleApp<span class="token punctuation">.</span>Enums</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>ComponentModel<span class="token punctuation">.</span>DataAnnotations<span class="token punctuation">.</span>Schema</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">ConsoleApp<span class="token punctuation">.</span>DataAccess<span class="token punctuation">.</span>Entities</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Id <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">UserType</span> UserType <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> DisplayName
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">UserType</span><span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Id</span><span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Name</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>
            <span class="token keyword">private</span> <span class="token keyword">set</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/27/2021, 1:42:59 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/niuai-docs/ORM/ef-core-mysql.html" class="prev">
        EFCore 连 MySQL
      </a></span> <span class="next"><a href="/blog/niuai-docs/ORM/mysql-profile.html">
        MySQL 调用跟踪（Neor Profile SQL）
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.e8e2b0fe.js" defer></script><script src="/blog/assets/js/2.150d4df4.js" defer></script><script src="/blog/assets/js/12.442a32b2.js" defer></script>
  </body>
</html>
